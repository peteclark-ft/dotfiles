#!/bin/bash

#export FLEETCTL_TUNNEL=dynpub-uk-tunnel-up.ft.com
#export FLEETCTL_TUNNEL=preprod-uk-tunnel-up.ft.com

alias dynssh='export FLEETCTL_TUNNEL=dynpub-uk-tunnel-up.ft.com && ssh dynpub-uk-tunnel-up.ft.com'
alias ppssh='export FLEETCTL_TUNNEL=pre-prod-tunnel-up.ft.com && ssh pre-prod-tunnel-up.ft.com'
alias semssh='export FLEETCTL_TUNNEL=semantic-tunnel-up.ft.com && ssh semantic-tunnel-up.ft.com'

function reset_dynssh {
  sed -i.backup '/dynpub-uk-tunnel-up.ft.com/d' ~/.ssh/known_hosts
}

function reset_ppssh {
  sed -i.backup '/pre-prod-tunnel-up.ft.com/d' ~/.ssh/known_hosts
}

function dynsshp {
  if [[ -z $1 ]]; then
    echo "Usage - dynsshp [cluster-host:port]"
    return 1
  fi

  ssh -L 9000:$1 core@dynpub-uk-tunnel-up.ft.com
}

function ppsshp {
  if [[ -z $1 ]]; then
    echo "Usage - ppsshp [cluster-host:port]"
    return 1
  fi

  ssh -L 9000:$1 core@pre-prod-tunnel-up.ft.com
}

function semsshp {
  if [[ -z $1 ]]; then
    echo "Usage - semsshp [cluster-host:port]"
    return 1
  fi

  ssh -L 9000:$1 core@semantic-tunnel-up.ft.com
}

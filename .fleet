#!/bin/bash

function fcssh {
  colours
  if [[ -z $1 ]] || [[ -z $2 ]]; then
    echo "${amber_status} Usage - fcssh [up-tunnel-url] [service-name]"
    cleanup_colours && return 1
  fi

  echo "${green_status} Connecting to $1"
  ssh -t $1 'fleetctl ssh '$2
  cleanup_colours
}

function fctail {
  colours
  if [[ -z $1 ]] || [[ -z $2 ]]; then
    echo "${amber_status} Usage - fctail [up-tunnel-url] [service-name] [:optional lines]"
    cleanup_colours && return 1
  fi

  if [[ -z $3 ]]; then
    lines=200
  else
    lines=${3}
  fi

  echo "${green_status} Connecting to $1"
  ssh -t $1 'fleetctl journal -lines='$lines' -f '$2
  echo "${red_status} Closed connection to $1"
  cleanup_colours
}
